pipeline {
    agent any

    tools {
       maven 'maven 3.9.11' 
    }

  enenvironment {
    DOCKER_IMAGE = "demo-app" 
    CONTAINER_NAME = "springboot-container" 
    JAR_FILE_NAME = "app.jar"  
    PORT = "8081"

    REMOTE_USER = "ec2-user"
    REMOTE_HOST = "43.202.247.76"
    REMOTE_DIR = "/home/ec2-user/deploy"
    SSH_CREDENTIALS_ID = "7b0db303-54dd-44a3-8d2e-bf99133d810f"

  }
 
  stages {
    stage('Git Checkout') {
       steps { 
          checkout scm             
    
       }
    }
  }
     stage('Maven Build') {
         steps {
           sh 'mvn clean package-DskipTests
         }
    }

   stage('Prepare Jar') {
     steps {
      sh 'cp target/demo-0.0.1-SNAPSHOT.jar ${JAR_FILE_NAME}'
    }
   }

         